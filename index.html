<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Image Color Picker</title>
    <style>
        body { font-family: Arial; text-align: center; padding: 20px; }
        canvas { border: 1px solid black; cursor: crosshair; }
        #colorDisplay { font-size: 20px; margin-top: 10px; }
    </style>
</head>
<body>

<h1>Image Color Picker</h1>
<input type="file" id="imageLoader" name="imageLoader"/>
<br><br>
<canvas id="imageCanvas"></canvas>
<div id="colorDisplay">Click an image pixel to see its HEX value</div>

<script>
    const imageLoader = document.getElementById('imageLoader');
    const canvas = document.getElementById('imageCanvas');
    const ctx = canvas.getContext('2d');
    const colorDisplay = document.getElementById('colorDisplay');

    let img = new Image();

    imageLoader.addEventListener('change', handleImage, false);

    function handleImage(e) {
        const reader = new FileReader();
        reader.onload = function(event) {
            img.onload = function() {
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0);
            }
            img.src = event.target.result;
        }
        reader.readAsDataURL(e.target.files[0]);
    }

    canvas.addEventListener('click', function(event) {
        const rect = canvas.getBoundingClientRect();
        const x = event.clientX - rect.left;
        const y = event.clientY - rect.top;

        const pixel = ctx.getImageData(x, y, 1, 1).data;
        const r = pixel[0], g = pixel[1], b = pixel[2];
        const hex = rgbToHex(r, g, b);

        colorDisplay.innerHTML = `Pixel (${x}, ${y}) â†’ Color: <span style="color:${hex}">${hex}</span>`;
        navigator.clipboard.writeText(hex).then(() => {
            console.log(`Copied ${hex} to clipboard`);
        });
    });

    function rgbToHex(r, g, b) {
        return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase();
    }
</script>

</body>
</html>
